@page
@model Spider_QAMS.Pages.Users.ManageUserModel
@{
    ViewData["Title"] = "Manage Users";
}

<div>
    <div class="row pt-1 mb-3">
        <!-- Title on the left -->
        <div class="col-6">
            <h4 class="rb-header">Manage Users</h4>
        </div>
        <!-- Buttons on the right -->
        <div class="col-6 text-end">
            <div class="d-inline-block me-2">
                <button asp-page-handler="ExportToExcel" class="btn create-btn" style="background: linear-gradient(to bottom, #ffffff, #e0e0e0); color: #0E786B;">
                    <i class="fas fa-file-excel"></i>
                    Export to Excel
                </button>
            </div>
            <div class="d-inline-block">
                <a asp-page="/Users/CreateUser" class="btn create-btn" style="background: linear-gradient(to bottom, #ffffff, #e0e0e0); color: #0E786B;">
                    <i class="fas fa-plus-circle"></i>
                    &nbsp;Create New User
                </a>
            </div>
        </div>
    </div>

    <div class="mb-3 mt-2 d-flex align-items-center">
        <label for="findByName" class="me-2">Find by name:</label>
        <input type="text" id="findByName" asp-for="SearchTerm" class="form-control me-2" style="width: 300px;" />
        <button type="button" class="btn btn-outline-primary me-2" onclick="SearchUser()">Search</button>
        <a href="/Users/ManageUser" class="btn btn-link">Back to full list</a>
    </div>

    <table class="table table-bordered table-striped rounded">
        <thead class="table-header" style="background: linear-gradient(to bottom, #0AE5CA, #1AB7A5); color: white;">
            <tr>
                <th>Designation</th>
                <th>Full Name</th>
                <th>Email</th>
                <th>User Name</th>
                <th>Profile Name</th>
                <th>Phone Number</th>
                <th>Is Active</th>
                <th>Is ADUser</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var user in Model.Users)
            {
                <tr>
                    <td>@user.Designation</td>
                    <td>@user.FullName</td>
                    <td>@user.EmailID</td>
                    <td>@user.UserName</td>
                    <td>@user.ProfileSiteData.ProfileName</td>
                    <td>@user.PhoneNumber</td>
                    <td>
                        <input class="form-check-input ms-2" type="checkbox" disabled="disabled" @(user.IsActive ? "checked" : "") />
                    </td>
                    <td>
                        <input class="form-check-input ms-2" type="checkbox" disabled="disabled" @(user.IsADUser ? "checked" : "") />
                    </td>
                    <td style="white-space: nowrap;">
                        <a asp-page="/Users/UpdateUser" asp-route-userId="@user.UserId" asp- class="btn btn-primary btn-sm"><i class="fas fa-edit"></i></a>
                        <a asp-page="/Users/DeleteUser" asp-route-userId="@user.UserId" class="btn btn-danger btn-sm"><i class="fas fa-trash-alt"></i></a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>


@section scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        function SearchUser() {
            // Add logic here to handle the search functionality
            // E.g., Submit a form or perform AJAX search
        }
    </script>
}